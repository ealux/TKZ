@namespace TKZ.Client.Pages.Log
@inject LogBase LB

@*<div class="pre_log d-inline-block flex-column">
    R
</div>*@
<div class="log w3-animate-right w3-animate-fading @(LB.Collapse ? "collapse":"")" @onchange="LogChangeEvent">
        <div class="log-content" @onchange="LogChangeEvent">
            <div class="p-1" style="text-align:center;">
                <button class="container-fluid btn btn-sm w-auto justify-content-center"
                        @onclick="RemoveMessageQueue">
                    <b>Очистить</b>
                </button>
            </div>
            @foreach (var mes in LB.Messages)
            {
                <TKZ.Client.Pages.Log.Message Type="@mes.Type" Header="@mes.Header" Text="@mes.Text" Link="@mes.Link" />
            }
        </div>
</div>

@code {
    [Parameter]
    public EventCallback LogChangeEvent { get; set; }

    private async Task RemoveMessageQueue()
    {
        await LB.RemoveMessage();
        LB.Collapse = !LB.Collapse;
        StateHasChanged();
    }

    protected override void OnInitialized()
    {
        LB.OnChange += StateHasChanged;
    }
}