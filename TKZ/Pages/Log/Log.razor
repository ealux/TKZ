@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Components
@namespace TKZ.Pages.Log

<div class="log">
    <input id="log-one" type="checkbox">
    <label for="log-one">
        <img style="width: 40px; height: 40px; padding-top: 8px; " src="@LogBase.ImageChecker()">
    </label>
    @if (LogBase.Messages.Count > 0)
    {
        <div class="log-content">

            <div class="p-1" style="text-align:center;">
                <button class="container-fluid btn btn-sm w-auto justify-content-center"
                        @onclick="RemoveMessageQueue">
                    Очистить
                </button>
            </div>
            @foreach (var mes in LogBase.Messages)
            {
                <Message Type="@mes.Type" Header="@mes.Header" Text="@mes.Text" />
            }
                
        </div>
    }
</div>


@code {
    [Parameter]
    public LogBase lg { get; set; }

    private async Task RemoveMessageQueue()
    {
        await LogBase.RemoveMessage();
        //ShouldRender();
        //StateHasChanged();
    }
}
